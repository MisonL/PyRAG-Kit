# 用户指南

本指南将帮助您了解如何与 PyRAG-Kit 聊天机器人进行有效交互，包括基本对话、使用特殊命令以及如何利用动态配置功能。

## 1. 启动聊天会话

当您按照 [快速上手](./getting-started.md) 指南成功运行 `python main.py` 后，程序会进入交互式聊天界面。

您会看到类似以下的欢迎信息：

```
知识库 'employee_kb.pkl' 已加载。
LLM 'google' 加载成功。
... (当前配置信息) ...
我是你的智能客服（由 google 支持），请输入问题（输入'/quit'或'/config'）：
```

这表示程序已准备就绪，您可以开始提问了。

## 2. 进行对话

直接在 `你:` 提示符后输入您的问题，然后按回车键。

```
你: 我们公司的年假政策是什么？
```

程序会执行以下步骤：

1.  **意图识别**: 首先，LLM 会尝试理解您问题的核心意图。
2.  **知识库检索**: 接着，程序会根据您设置的检索模式（如混合检索）从知识库中查找最相关的文档片段。检索到的内容会以表格形式展示，包括来源、内容预览和相关度得分。
3.  **生成回答**: 最后，LLM 会结合检索到的知识和您的原始问题，生成一个流畅、自然的回答。回答会以“打字机”的流式效果逐字显示。

## 3. 特殊命令

在聊天过程中，您可以随时输入以下特殊命令来控制程序：

### `/config` - 打开配置菜单

这是 PyRAG-Kit 最强大的功能之一。输入 `/config` 会暂停聊天，并进入一个交互式配置菜单。

![配置菜单](https://path/to/your/config_menu_screenshot.png)  <!-- 占位符，建议后续替换为真实截图 -->

在菜单中，您可以使用键盘方向键进行选择，并按回车确认。主要功能包括：

*   **调整检索参数**:
    *   **检索模式**: 在“全文检索”、“向量检索”和“混合检索”之间切换。
    *   **检索数量 Top K**: 调整每次查询返回的文档数量。
    *   **Rerank重排**: 启用或禁用 Rerank 模型进行二次精排。
    *   **混合搜索权重**: 当使用“混合检索”时，调整向量和关键词搜索结果的权重。
*   **切换模型**:
    *   **语言模型 (LLM)**: 动态切换当前对话使用的聊天模型（例如，从 `google` 切换到 `openai-gpt4o`）。切换后，程序会自动重载模型。
    *   **重排模型 (Rerank)**: 切换用于精排的 Rerank 模型。
*   **查看当前完整配置**: 显示所有当前生效的聊天和模型参数。

完成配置后，选择“保存并返回聊天”即可应用更改并继续对话。

### `/quit` 或 `/exit` - 退出程序

输入 `/quit` 或 `/exit` 可以安全地关闭程序。您也可以使用 `Ctrl+C` 或 `Ctrl+D` 快捷键来退出。

## 4. 查看日志

程序运行期间的所有重要操作和聊天记录都会被记录下来。您可以在 `data/logs/` 目录下找到日志文件。

*   `chat_session_YYYY-MM-DD_HH-MM-SS.log`: 记录了详细的聊天对话历史，包括用户问题、识别到的意图、检索到的上下文以及 LLM 的最终回答。这对于问题追溯和效果分析非常有用。
*   `app.log`: 记录了程序的通用运行日志，包括模型的加载、配置的更改、遇到的错误等，主要用于调试。