<div align="center">

![Logo](imgs/logo.jpg)

</div>

<div align="center">

[![Python Version](https://img.shields.io/badge/Python-3.9%2B-blue.svg)](https://www.python.org/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Author: Mison](https://img.shields.io/badge/Author-Mison-brightgreen)](mailto:1360962086@qq.com)

</div>

> **PyRAG-Kit** æ˜¯ä¸€ä¸ª **Dify æ ¸å¿ƒé€»è¾‘çš„ Python å®ç°**ï¼Œæ—¨åœ¨æä¾›ä¸€ä¸ªè½»é‡çº§çš„æœ¬åœ°åŒ–å·¥å…·ï¼Œç”¨äºå¿«é€ŸéªŒè¯å’Œç†è§£ Dify çš„çŸ¥è¯†åº“æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼ŒåŒ…æ‹¬æ–‡æ¡£çš„**å‘é‡åŒ–ã€åˆ†æ®µå¤„ç†**ä»¥åŠ**æ··åˆæ£€ç´¢**ç­–ç•¥ã€‚

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

- **ğŸ”Œ å¤šæ¨¡å‹æ”¯æŒ**: æ— ç¼é›†æˆå¤šç§ä¸»æµå’Œæœ¬åœ°å¤§è¯­è¨€æ¨¡å‹ï¼ŒåŒ…æ‹¬ Google Gemini, OpenAI GPT, Anthropic Claude, é˜¿é‡Œäº‘é€šä¹‰åƒé—®, è±†åŒ…, DeepSeek, Grok, ä»¥åŠé€šè¿‡ Ollama æˆ– LM Studio è¿è¡Œçš„æœ¬åœ°æ¨¡å‹ã€‚
- **ğŸš€ é«˜çº§æ£€ç´¢ç­–ç•¥**: æ”¯æŒå‘é‡æ£€ç´¢ã€å…¨æ–‡æ£€ç´¢å’Œæ··åˆæ£€ç´¢ï¼Œå¹¶é€šè¿‡ Rerank æ¨¡å‹äºŒæ¬¡ç²¾æ’ï¼Œæå‡ç­”æ¡ˆç›¸å…³æ€§ã€‚
- **âš™ï¸ åŠ¨æ€äº¤äº’é…ç½®**: è¿è¡Œæ—¶é€šè¿‡ `/config` å‘½ä»¤æ‰“å¼€äº¤äº’å¼èœå•ï¼ŒåŠ¨æ€åˆ‡æ¢LLMã€è°ƒæ•´æ£€ç´¢ç­–ç•¥ã€ä¿®æ”¹æƒé‡ç­‰ã€‚
- **ğŸ“„ æµå¼å“åº”**: å®¢æœå›ç­”é‡‡ç”¨æ‰“å­—æœºæµå¼è¾“å‡ºï¼Œæå‡ç”¨æˆ·äº¤äº’ä½“éªŒã€‚
- **ğŸ“Š ç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿ**: é‡‡ç”¨æ ‡å‡† `logging` æ¨¡å—ï¼Œå°†ç¨‹åºè¿è¡Œå’ŒèŠå¤©å¯¹è¯çš„è¯¦ç»†ä¿¡æ¯ç»Ÿä¸€è®°å½•åˆ°æ–‡ä»¶å’Œæ§åˆ¶å°ï¼Œä¾¿äºå®¡è®¡ã€åˆ†æå’Œè°ƒè¯•ã€‚
- **âœ… å•å…ƒæµ‹è¯•**: ä¸ºæ ¸å¿ƒæ¨¡å—ï¼ˆå¦‚æ¨¡å‹æä¾›å•†å·¥å‚ã€å‘é‡å­˜å‚¨å·¥å‚ã€ETLæµæ°´çº¿ï¼‰ç¼–å†™äº†å…¨é¢çš„å•å…ƒæµ‹è¯•ï¼Œç¡®ä¿ä»£ç è´¨é‡å’ŒåŠŸèƒ½ç¨³å®šæ€§ã€‚
- **ğŸ§¹ æ™ºèƒ½ç¼“å­˜ä¸æ¸…ç†**: è‡ªåŠ¨å¤„ç†çŸ¥è¯†åº“å‘é‡åŒ–ï¼Œå¹¶åœ¨ç¨‹åºé€€å‡ºæ—¶æ¸…ç†ç¼“å­˜ï¼Œä¿æŒé¡¹ç›®æ•´æ´ã€‚

## ğŸ“¸ ç¨‹åºæˆªå›¾

![Main Screenshot](imgs/main.jpg)


## ğŸ“‚ é¡¹ç›®ç»“æ„

é¡¹ç›®é‡‡ç”¨äº†ç°ä»£åŒ–çš„ç›®å½•ç»“æ„ï¼Œå°†æºä»£ç ã€æ•°æ®ã€è„šæœ¬å’Œæ–‡æ¡£æ¸…æ™°åœ°åˆ†ç¦»å¼€æ¥ã€‚

```
.
â”œâ”€â”€ data/                # ç”Ÿæˆçš„æ•°æ® (è¢« .gitignore å¿½ç•¥)
â”‚   â”œâ”€â”€ employee_kb.pkl  # çŸ¥è¯†åº“å‘é‡æ–‡ä»¶
â”‚   â””â”€â”€ logs/            # èŠå¤©æ—¥å¿—
â”œâ”€â”€ knowledge_base/      # å­˜æ”¾ä½ çš„åŸå§‹çŸ¥è¯†åº“ .md æ–‡ä»¶
â”œâ”€â”€ scripts/             # ç‹¬ç«‹è„šæœ¬
â”‚   â””â”€â”€ embed_knowledge_base.py # çŸ¥è¯†åº“å‘é‡åŒ–è„šæœ¬
â”œâ”€â”€ src/                 # æ ¸å¿ƒæºä»£ç 
â”‚   â”œâ”€â”€ chat/            # èŠå¤©æ ¸å¿ƒé€»è¾‘
â”‚   â”œâ”€â”€ providers/       # æ‰€æœ‰æ¨¡å‹æä¾›å•†çš„å®ç°
â”‚   â”œâ”€â”€ retrieval/       # æ£€ç´¢é€»è¾‘
â”‚   â”œâ”€â”€ ui/              # ç”¨æˆ·ç•Œé¢ (èœå•ã€æ˜¾ç¤ºå·¥å…·)
â”‚   â””â”€â”€ utils/           # è¾…åŠ©å·¥å…· (é…ç½®ã€æ¸…ç†ã€æ—¥å¿—ç®¡ç†)
â”œâ”€â”€ tests/               # è‡ªåŠ¨åŒ–æµ‹è¯•
â”‚   â”œâ”€â”€ etl/             # ETLæµæ°´çº¿æµ‹è¯•
â”‚   â”œâ”€â”€ providers/       # æ¨¡å‹æä¾›å•†æµ‹è¯•
â”‚   â””â”€â”€ retrieval/       # æ£€ç´¢æ¨¡å—æµ‹è¯•
â”œâ”€â”€ main.py              # ç¨‹åºä¸»å…¥å£
â”œâ”€â”€ config.ini.example   # é…ç½®æ–‡ä»¶æ¨¡æ¿
â”œâ”€â”€ .gitignore           # Gitå¿½ç•¥æ–‡ä»¶é…ç½®
â”œâ”€â”€ README.md            # å°±æ˜¯ä½ æ­£åœ¨çœ‹çš„è¿™ä¸ªæ–‡ä»¶
â””â”€â”€ requirements.txt     # Pythonä¾èµ–é¡¹
```

## ğŸš€ å®‰è£…ä¸è¿è¡Œ

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/MisonL/PyRAG-Kit.git
cd PyRAG-Kit
```

### 2. å®‰è£…ä¾èµ–

é¡¹ç›®ä½¿ç”¨ `requirements.txt` ç®¡ç†ä¾èµ–ã€‚

```bash
pip install -r requirements.txt
```

### 3. é…ç½®æŒ‡å—

æœ¬é¡¹ç›®é‡‡ç”¨äº†ä¸€å¥—çµæ´»çš„åˆ†å±‚é…ç½®ç³»ç»Ÿã€‚æ‚¨å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½å’Œä½¿ç”¨åœºæ™¯ï¼Œé€‰æ‹©ä»¥ä¸‹ä»»ä½•ä¸€ç§æˆ–å¤šç§æ–¹å¼è¿›è¡Œé…ç½®ã€‚

**é…ç½®åŠ è½½ä¼˜å…ˆçº§:**

ç³»ç»Ÿä¼šæŒ‰ç…§ä»¥ä¸‹é¡ºåºå¯»æ‰¾é…ç½®é¡¹ï¼Œæ’åœ¨å‰é¢çš„æ–¹å¼ä¼šè¦†ç›–æ’åœ¨åé¢çš„ï¼š

1.  **ç¯å¢ƒå˜é‡** (æœ€é«˜ä¼˜å…ˆçº§)
2.  **`.env` æ–‡ä»¶** (ä½äºé¡¹ç›®æ ¹ç›®å½•)
3.  **`config.ini` æ–‡ä»¶** (ä½äºé¡¹ç›®æ ¹ç›®å½•)
4.  **ä»£ç ä¸­çš„é»˜è®¤å€¼** (æœ€ä½ä¼˜å…ˆçº§)

---

#### **æ–¹å¼ä¸€: `config.ini` æ–‡ä»¶ (æ¨èç”¨äºæœ¬åœ°å¼€å‘)**

è¿™æ˜¯æœ€ç›´è§‚çš„é…ç½®æ–¹å¼ã€‚

1.  **åˆ›å»ºé…ç½®æ–‡ä»¶**:
    ```bash
    cp config.ini.example config.ini
    ```

2.  **ç¼–è¾‘ `config.ini`**:
    æ‰“å¼€ `config.ini` æ–‡ä»¶ï¼Œæ ¹æ®æ‚¨çš„éœ€æ±‚ä¿®æ”¹ã€‚æ–‡ä»¶å†…æœ‰è¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šè¯´æ˜æ¯ä¸ªé…ç½®é¡¹çš„ä½œç”¨ã€‚
    ```ini
    # config.ini

    [API_KEYS]
    # å¡«å…¥ä½ å¸Œæœ›ä½¿ç”¨çš„æ¨¡å‹çš„API Key
    GOOGLE_API_KEY = "AIzaSy..."
    # ...

    [BEHAVIOR]
    # é»˜è®¤ä½¿ç”¨çš„LLMæä¾›å•†
    DEFAULT_LLM_PROVIDER = google
    # ...
    ```

---

#### **æ–¹å¼äºŒ: `.env` æ–‡ä»¶ (æ¨èç”¨äºéš”ç¦»æ•æ„Ÿä¿¡æ¯)**

æ‚¨å¯ä»¥å°†æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚APIå¯†é’¥ï¼‰æˆ–éœ€è¦é¢‘ç¹æ›´æ”¹çš„é…ç½®æ”¾åœ¨ `.env` æ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶é€šå¸¸ä¸æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚

1.  åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªåä¸º `.env` çš„æ–‡ä»¶ã€‚

2.  åœ¨æ–‡ä»¶ä¸­ä»¥ `KEY=VALUE` çš„æ ¼å¼æ·»åŠ é…ç½®é¡¹ã€‚æ³¨æ„ï¼Œè¿™é‡Œçš„é”®åéœ€è¦ä¸ `config.ini` ä¸­çš„é”®åä¿æŒä¸€è‡´ï¼Œä½†ä¸éœ€è¦æ®µè½ `[SECTION]`ã€‚
    ```dotenv
    # .env
    # è¿™é‡Œçš„é…ç½®ä¼šè¦†ç›– config.ini ä¸­çš„åŒåé…ç½®

    OPENAI_API_KEY="sk-your-real-openai-key"
    DEFAULT_LLM_PROVIDER="openai-gpt4o"
    LOG_LEVEL="DEBUG"
    ```

---

#### **æ–¹å¼ä¸‰: ç¯å¢ƒå˜é‡ (æ¨èç”¨äºç”Ÿäº§éƒ¨ç½²)**

åœ¨æœåŠ¡å™¨æˆ– Docker ç¯å¢ƒä¸­éƒ¨ç½²æ—¶ï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡æ˜¯æœ€æ ‡å‡†ã€æœ€å®‰å…¨çš„æ–¹å¼ã€‚

-   åœ¨ Linux æˆ– macOS ç³»ç»Ÿä¸­:
    ```bash
    export OPENAI_API_KEY="sk-your-real-openai-key"
    export DEFAULT_LLM_PROVIDER="openai-gpt4o"
    python main.py
    ```
-   åœ¨ Windows (PowerShell) ä¸­:
    ```powershell
    $env:OPENAI_API_KEY="sk-your-real-openai-key"
    $env:DEFAULT_LLM_PROVIDER="openai-gpt4o"
    python main.py
    ```

> **æ€»ç»“**:
> - **æœ¬åœ°å¼€å‘**: ç›´æ¥ä¿®æ”¹ `config.ini` æœ€æ–¹ä¾¿ã€‚
> - **å›¢é˜Ÿåä½œ**: ä½¿ç”¨ `config.ini` ä½œä¸ºåŸºç¡€é…ç½®ï¼Œä¸ªäººä½¿ç”¨ `.env` æ–‡ä»¶è¦†ç›–éƒ¨åˆ†é…ç½®ï¼ˆå¹¶å°† `.env` åŠ å…¥ `.gitignore`ï¼‰ã€‚
> - **æœåŠ¡å™¨éƒ¨ç½²**: ä½¿ç”¨ç¯å¢ƒå˜é‡æ¥ç®¡ç†æ‰€æœ‰é…ç½®ï¼Œç‰¹åˆ«æ˜¯å¯†é’¥ã€‚

### 4. å‡†å¤‡çŸ¥è¯†åº“

å°†ä½ çš„ `.md` æ ¼å¼çš„çŸ¥è¯†åº“æ–‡æ¡£æ”¾å…¥ `knowledge_base` æ–‡ä»¶å¤¹ä¸­ã€‚

### 5. è¿è¡Œç¨‹åº

ç›´æ¥ä»é¡¹ç›®æ ¹ç›®å½•è¿è¡Œä¸»ç¨‹åºæ–‡ä»¶å³å¯ã€‚

```bash
python main.py
```

**ç¨‹åºä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹å·¥ä½œ:**
1.  **æ£€æŸ¥çŸ¥è¯†åº“**: å¦‚æœ `knowledge_base` ç›®å½•ä¸­æœ‰æ–°çš„æˆ–æ›´æ–°çš„æ–‡æ¡£ï¼Œç¨‹åºä¼šè‡ªåŠ¨è¿›è¡Œå‘é‡åŒ–å¹¶æ›´æ–° `data/employee_kb.pkl` æ–‡ä»¶ã€‚
2.  **å¯åŠ¨èŠå¤©**: ç›´æ¥è¿›å…¥äº¤äº’å¼èŠå¤©ä¼šè¯ã€‚

**å¸¸ç”¨å‘½ä»¤:**
-   è¾“å…¥ `/config` å¯ä»¥éšæ—¶æ‰“å¼€åŠ¨æ€é…ç½®èœå•ã€‚
-   è¾“å…¥ `/quit` æˆ– `exit` å¯ä»¥é€€å‡ºèŠå¤©ã€‚
-   è¯¦ç»†æ—¥å¿—è¯·æŸ¥çœ‹ `data/logs/` ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚

---

<div align="center">

## âš–ï¸ è®¸å¯è¯å£°æ˜

æœ¬é¡¹ç›®ç§»æ¤äº†éƒ¨åˆ† [Dify](https://github.com/langgenius/dify) çš„æ ¸å¿ƒé€»è¾‘ã€‚Dify é‡‡ç”¨çš„æ˜¯ [Apache License 2.0](http://www.apache.org/licenses/LICENSE-2.0) çš„ä¿®æ”¹ç‰ˆæœ¬ï¼Œå¹¶é™„åŠ äº†ç‰¹å®šçš„å•†ä¸šä½¿ç”¨æ¡ä»¶ï¼ˆä¾‹å¦‚å¤šç§Ÿæˆ·æœåŠ¡å’Œå‰ç«¯ LOGO/ç‰ˆæƒé™åˆ¶ï¼‰ã€‚

å› æ­¤ï¼Œæœ¬é¡¹ç›®åœ¨ä½¿ç”¨ Dify æºç çš„éƒ¨åˆ†ï¼Œä¹Ÿéœ€éµå¾ª Dify çš„åŸå§‹è®¸å¯è¯åŠå…¶é™„åŠ æ¡ä»¶ã€‚è¯¦ç»†è®¸å¯è¯å†…å®¹è¯·å‚é˜…é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ [`DIFY_LICENSE`](DIFY_LICENSE) æ–‡ä»¶ã€‚

åœ¨éµå®ˆ Dify è®¸å¯è¯çš„å‰æä¸‹ï¼Œæœ¬é¡¹ç›®å…¶ä½™éƒ¨åˆ†é‡‡ç”¨ [MIT License](https://opensource.org/licenses/MIT) è¿›è¡Œè®¸å¯ã€‚

### Dify ç§»æ¤ä»£ç æ–‡ä»¶

ä»¥ä¸‹æ–‡ä»¶åŒ…å«æˆ–å— Dify æ ¸å¿ƒé€»è¾‘å¯å‘ï¼š

*   `src/etl/pipeline.py`
*   `src/etl/cleaners/base.py`
*   `src/etl/cleaners/basic_cleaner.py`
*   `src/etl/extractors/base.py`
*   `src/etl/extractors/markdown_extractor.py`
*   `src/etl/splitters/base.py`
*   `src/etl/splitters/recursive_text_splitter.py`
*   `src/retrieval/retriever.py`
*   `src/retrieval/vdb/base.py`
*   `src/retrieval/vdb/factory.py`
*   `src/retrieval/vdb/faiss_store.py`
*   `src/models/document.py`

</div>
